"use strict";var createError=require("http-errors"),express=require("express"),path=require("path"),cookieParser=require("cookie-parser"),logger=require("morgan");require("dotenv").config();var connectionString=process.env.MONGO_CON;mongoose=require("mongoose"),mongoose.connect(connectionString,{useNewUrlParser:!0,useUnifiedTopology:!0});var db=mongoose.connection;db.on("error",console.error.bind(console,"MongoDB connectionerror:")),db.once("open",function(){console.log("Connection to DB succeeded")});var indexRouter=require("./routes/index"),usersRouter=require("./routes/users"),EmployeeRouter=require("./routes/Employee"),gridbuildRouter=require("./routes/gridbuild"),resourceRouter=require("./routes/resource"),selectorRouter=require("./routes/selector"),Employee=require("./models/Employee"),app=express();function recreateDB(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Employee.deleteMany());case 2:new Employee({EmpName:"Sowji",EmpType:"Permanent",EmpSal:1e3}).save(function(e,r){if(e)return console.error(e);console.log("First object saved")}),new Employee({EmpName:"Sai",EmpType:"Temporary",EmpSal:2e3}).save(function(e,r){if(e)return console.error(e);console.log("second object saved")}),new Employee({EmpName:"Kusuma",EmpType:"Temporary",EmpSal:3e3}).save(function(e,r){if(e)return console.error(e);console.log("Third object saved")});case 8:case"end":return e.stop()}})}app.set("views",path.join(__dirname,"views")),app.set("view engine","pug"),app.use(logger("dev")),app.use(express.json()),app.use(express.urlencoded({extended:!1})),app.use(cookieParser()),app.use(express.static(path.join(__dirname,"public"))),app.use("/",indexRouter),app.use("/users",usersRouter),app.use("/gridbuild",gridbuildRouter),app.use("/Employee",EmployeeRouter),app.use("/selector",selectorRouter),app.use("/resource",resourceRouter);var reseed=!0;reseed&&recreateDB(),app.use(function(e,r,o){o(createError(404))}),app.use(function(e,r,o,s){o.locals.message=e.message,o.locals.error="development"===r.app.get("env")?e:{},o.status(e.status||500),o.render("error")}),module.exports=app;
//# sourceMappingURL=app.min.js.map
