"use strict";var express=require("express"),passport=require("passport"),router=express.Router(),Account=require("../models/account");router.get("/",function(e,r){r.render("index",{title:"Employee App",user:e.user})}),router.get("/register",function(e,r){r.render("register",{title:"Employee App Registration"})}),router.post("/register",function(o,n){Account.findOne({username:o.body.username},function(e,r){if(e)return n.render("register",{title:"Registration",message:"Registration error",account:o.body.username});if(r=={})return n.render("register",{title:"Registration",message:"Existing User",account:o.body.username});var t=new Account({username:o.body.username});Account.register(t,o.body.password,function(e,r){return e?n.render("register",{title:"Registration",message:"access error",account:o.body.username}):r?(console.log("Sucess, redirect"),void n.redirect("/")):n.render("register",{title:"Registration",message:"access error",account:o.body.username})})})}),router.get("/login",function(e,r){r.render("login",{title:"Employee App Login",user:e.user})}),router.post("/login",passport.authenticate("local"),function(e,r){e.session.returnTo&&r.redirect(e.session.returnTo),r.redirect("/")}),router.get("/logout",function(e,r){e.logout(function(e){if(e)return next(e);r.redirect("/")})}),router.get("/ping",function(e,r){r.status(200).send("pong!")}),module.exports=router;
//# sourceMappingURL=index.min.js.map
